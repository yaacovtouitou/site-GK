<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>{% block title %}GÃ©oula Kids{% endblock %}</title>
        <link rel="icon" href="{{ asset('favicon.ico') }}">

        {# Fonts #}
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800;900&family=Orbitron:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">

        {# Tailwind CSS via CDN for immediate rendering #}
        <script src="https://cdn.tailwindcss.com"></script>
        <script>
            tailwind.config = {
                theme: {
                    extend: {
                        colors: {
                            'royal-blue': '#002366',
                            'gold': '#D4AF37',
                            'cyber-white': '#F0F4F8',
                            'silver': '#C0C0C0',
                            'vibrant-orange': '#FF6B35',
                        },
                        fontFamily: {
                            sans: ['Poppins', 'sans-serif'],
                            heading: ['Orbitron', 'sans-serif'],
                        }
                    }
                }
            }
        </script>

        {# Custom Styles #}
        <link rel="stylesheet" href="{{ asset('styles/app.css') }}">

        {# Inline styles for critical CSS from geoula.css/theme.css to ensure they load if asset mapper isn't fully built #}
        <style>
            :root {
                --royal-blue: #002366;
                --gold: #D4AF37;
                --cyber-white: #F0F4F8;
                --silver: #C0C0C0;
                --vibrant-orange: #FF6B35;
                --holographic-1: #FF6B35;
                --holographic-2: #D4AF37;
                --holographic-3: #002366;
            }

            body {
                font-family: 'Poppins', sans-serif;
                background-color: var(--cyber-white);
                color: var(--royal-blue);
            }

            h1, h2, h3, h4, h5, h6 {
                font-family: 'Orbitron', sans-serif;
            }

            /* Custom Scrollbar */
            ::-webkit-scrollbar { width: 10px; height: 10px; }
            ::-webkit-scrollbar-track { background: rgba(0, 35, 102, 0.05); border-radius: 10px; }
            ::-webkit-scrollbar-thumb { background: linear-gradient(180deg, var(--vibrant-orange), var(--gold)); border-radius: 10px; }

            /* Glassmorphism */
            .glass-card {
                background: rgba(255, 255, 255, 0.15);
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.3);
                box-shadow: 0 8px 32px 0 rgba(0, 35, 102, 0.15);
            }
            .glass-card-dark {
                background: rgba(0, 35, 102, 0.2);
                backdrop-filter: blur(10px);
                border: 1px solid rgba(212, 175, 55, 0.2);
                box-shadow: 0 8px 32px 0 rgba(212, 175, 55, 0.1);
            }

            /* Neomorphism */
            .neo-card {
                background: linear-gradient(145deg, #ffffff, #e6e9ee);
                box-shadow: 8px 8px 16px rgba(163, 177, 198, 0.6), -8px -8px 16px rgba(255, 255, 255, 0.9);
            }

            /* Puffy Button */
            .puffy-button {
                background: linear-gradient(145deg, #ffffff, #f0f4f8);
                box-shadow: 6px 6px 12px rgba(163, 177, 198, 0.5), -6px -6px 12px rgba(255, 255, 255, 0.9);
                transition: all 0.2s ease;
            }
            .puffy-button:hover { transform: translateY(-2px); }
            .puffy-button:active { transform: translateY(0px); box-shadow: inset 4px 4px 8px rgba(163, 177, 198, 0.4), inset -4px -4px 8px rgba(255, 255, 255, 0.8); }

            .puffy-button-primary {
                background: linear-gradient(145deg, #002d7a, #001f57);
                box-shadow: 6px 6px 12px rgba(0, 23, 66, 0.5), -6px -6px 12px rgba(0, 47, 122, 0.3);
                color: white;
            }

            .puffy-button-gold {
                background: linear-gradient(145deg, #e0bc47, #c49b2f);
                box-shadow: 6px 6px 12px rgba(196, 155, 47, 0.5), -6px -6px 12px rgba(224, 188, 71, 0.3);
                color: var(--royal-blue);
            }

            /* Gradient Text */
            .gradient-text {
                background: linear-gradient(135deg, var(--royal-blue), var(--gold), var(--vibrant-orange));
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }

            /* Laser Glow */
            .laser-progress-track { background: rgba(0, 35, 102, 0.1); border-radius: 50px; overflow: hidden; }
            .laser-progress-fill {
                background: linear-gradient(90deg, #FF6B35, #D4AF37, #002366);
                background-size: 200% 100%;
                animation: laserGlow 2s ease infinite;
                border-radius: 50px;
            }
            @keyframes laserGlow {
                0% { background-position: 0% 50%; }
                50% { background-position: 100% 50%; }
                100% { background-position: 0% 50%; }
            }
        </style>

        {% block stylesheets %}
        {% endblock %}

        {% block javascripts %}
            {% block importmap %}{{ importmap('app') }}{% endblock %}
        {% endblock %}
    </head>
    <body class="min-h-screen flex flex-col">
        {# Header Component #}
        <header class="sticky top-0 z-40 w-full glass-card border-b border-gold/20">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex items-center justify-between h-16 sm:h-20">
                    {# Logo #}
                    <a href="{{ path('app_home') }}" class="flex items-center gap-2">
                        <div class="w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-gradient-to-br from-royal-blue to-gold flex items-center justify-center shadow-lg">
                            <span class="text-2xl">ðŸ‘‘</span>
                        </div>
                        <div>
                            <h1 class="text-lg sm:text-xl font-bold gradient-text">GÃ©oula Kids</h1>
                            <p class="text-xs text-gold hidden sm:block">Futuristic Chassidic</p>
                        </div>
                    </a>

                    {# Desktop Navigation #}
                    <nav class="hidden lg:flex items-center gap-2">
                        {% set nav_items = [
                            {'route': 'app_home', 'label': 'Accueil'},
                            {'route': 'app_dashboard', 'label': 'Mon Coin'},
                            {'route': 'app_gaming_zone', 'label': 'Gaming'},
                            {'route': 'app_library', 'label': 'Paracha'},
                            {'route': 'app_videos', 'label': 'VidÃ©os'},
                            {'route': 'app_missions', 'label': 'Missions'},
                            {'route': 'app_calendar', 'label': 'Calendrier'},
                            {'route': 'app_outings', 'label': 'Sorties'}
                        ] %}

                        {% for item in nav_items %}
                            <a href="{{ path(item.route) }}"
                               class="px-4 py-2 rounded-[15px] font-medium transition-all duration-200 {{ app.request.attributes.get('_route') == item.route ? 'puffy-button-primary text-white' : 'hover:bg-royal-blue/10 text-royal-blue' }}">
                                {{ item.label }}
                            </a>
                        {% endfor %}
                    </nav>

                    {# Mobile Menu Button (Placeholder) #}
                    <button class="lg:hidden puffy-button p-3 rounded-[15px]">
                        <span class="text-xl">â˜°</span>
                    </button>
                </div>
            </div>
        </header>

        <main class="flex-grow container mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8 lg:py-12">
            {% block body %}{% endblock %}
        </main>

        <footer class="mt-16 sm:mt-24 border-t border-gray-200">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8">
                <div class="text-center space-y-4">
                    <div class="flex items-center justify-center gap-2">
                        <div class="w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-lg overflow-hidden border-2 border-gold">
                            <img src="{{ asset('images/logo/logo-geoula-kids.jpg') }}" alt="Logo" class="w-full h-full object-cover">
                        </div>
                        <h3 class="text-lg font-bold gradient-text">GÃ©oula Kids</h3>
                    </div>
                    <p class="text-sm text-gray-600 max-w-md mx-auto">
                        Une plateforme futuriste chassidique dÃ©diÃ©e Ã  l'apprentissage et Ã  la joie de la Torah
                    </p>
                    <div class="flex items-center justify-center gap-6 text-xs text-gray-500">
                        <span>Â© 2026 GÃ©oula Kids</span>
                        <span>â€¢</span>
                        <span>Futuristic Chassidic Experience</span>
                    </div>
                </div>
            </div>
        </footer>

        {# Floating Mascot #}
        {% include 'components/floating_mascot.html.twig' %}
    </body>
</html>
